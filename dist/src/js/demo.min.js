"use strict";var data=[{image:"../source/song_1.jpg",audio:"../source/song_1.mp3",song:"丑八怪",album:"意外",singer:"薛之谦",duration:253,isLike:true},{image:"../source/song_2.jpg",audio:"../source/song_2.mp3",song:"小半",album:"小梦大半",singer:"陈粒",duration:297,isLike:false},{image:"../source/song_3.jpg",audio:"../source/song_3.mp3",song:"Shape of You",album:"You",singer:"ed sheeran",duration:235,isLike:false},{image:"../source/song_4.jpg",audio:"../source/song_4.mp3",song:"烟火里的尘埃",album:"尘埃",singer:"冯提莫",duration:190.8,isLike:true},{image:"../source/song_5.jpg",audio:"../source/song_5.mp3",song:"你的酒馆对我打了烊",album:"酒馆",singer:"冯提莫",duration:241.8,isLike:false},{image:"../source/song_6.jpg",audio:"../source/song_6.mp3",song:"青春不停跑",album:"青春",singer:"胡夏",duration:204.6,isLike:false},{image:"../source/song_7.jpg",audio:"../source/song_7.mp3",song:"趁你还年轻",album:"年轻",singer:"华晨宇",duration:198,isLike:true},{image:"../source/song_8.jpg",audio:"../source/song_8.mp3",song:"怒放 + 飞得更高",album:"怒放",singer:"沙宝亮、黄绮珊",duration:244.2,isLike:false},{image:"../source/song_9.jpg",audio:"../source/song_9.mp3",song:"Two Steps From Hell",album:"Hell",singer:"Star Sky",duration:318,isLike:false},{image:"../source/song_10.jpg",audio:"../source/song_10.mp3",song:"Valentin - A Little Story",album:"Story",singer:"My View",duration:195.6,isLike:false}];var len=data.length;var root=window.player;var control,time;var audio=root.audioManager;function getData(data,len){root.renders(data,len);control=new root.controlIndex(len);bindEvent();bindTouch();$("body").trigger("play:change",0)}function bindEvent(){$("body").on("play:change",function(e,index){root.render(data[index]);audio.getAudio(data[index].audio);root.pro.renderAllTime(data[index].duration);if(audio.status=="play"){rotated(0);audio.play();root.pro.start()}$(".img-box").attr("data-deg",0);$(".img-box").css({transform:"rotateZ(0deg)",transition:"none"});root.pro.start(0);if(audio.status=="pause"){root.pro.stop()}});$(".prev").on("click",function(){var i=control.prev();$("body").trigger("play:change",i)});$(".next").on("click",function(){var i=control.next();$("body").trigger("play:change",i)});$(".play").on("click",function(){if(audio.status=="pause"){audio.play();root.pro.start();var deg=$(".img-box").attr("data-deg");rotated(deg)}else{audio.pause();root.pro.stop();clearInterval(time)}$(".play").toggleClass("playing")});$(".list").on("click",function(){$(".song-list").toggleClass("song")});for(var i=0;i<len;i++){$(".control-song-list"+(i+1)+"").attr("date-index",i);$(".control-song-list"+(i+1)+"").on("click",function(e){var index=$(this).attr("date-index");control.getIndex(index);root.render(data[index]);audio.getAudio(data[index].audio);root.pro.start(0);root.pro.stop();audio.pause();clearInterval(time);$(".play").removeClass("playing")})}$(".like").on("click",function(){$(".like").toggleClass("likeing")})}function bindTouch(){var bottom=$(".pro-bottom").offset();var l=bottom.left;var w=bottom.width;$(".spot").on("touchstart",function(){root.pro.stop()}).on("touchmove",function(e){var x=e.changedTouches[0].clientX;var per=(x-l)/w;if(per>=0&&per<=1){root.pro.update(per)}}).on("touchend",function(e){var x=e.changedTouches[0].clientX;var per=(x-l)/w;if(per>=0&&per<=1){var _time=per*dataList[control.index].duration;root.pro.start(per);audio.playTo(_time);audio.play();audio.status="play";$(".play").addClass("playing")}})}function rotated(deg){clearInterval(time);deg=+deg;time=setInterval(function(){deg+=2;$(".img-box").attr("data-deg",deg);$(".img-box").css({transform:"rotateZ("+deg+"deg)",transition:"all 1s ease-out"})},90)}getData(data,len);